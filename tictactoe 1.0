<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Крестики-нолики с ботом и цветами</title>
<style>
  body { font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 50px; background-color: #f7f7f7; }
  h1 { margin-bottom: 20px; color: #333; text-shadow: 1px 1px 2px #aaa; }
  .board { display: grid; grid-template-columns: repeat(3, 120px); grid-template-rows: repeat(3, 120px); gap: 10px; }
  .cell { width: 120px; height: 120px; display: flex; justify-content: center; align-items: center; font-size: 64px; cursor: pointer; background: linear-gradient(145deg, #ffffff, #e0e0e0); border-radius: 15px; box-shadow: 5px 5px 10px #ccc, -5px -5px 10px #fff; transition: 0.2s; }
  .cell:hover { transform: scale(1.05); }
  #message { margin-top: 20px; font-size: 20px; font-weight: bold; color: #222; }
  button { margin-top: 15px; padding: 10px 20px; font-size: 18px; border-radius: 10px; border: none; cursor: pointer; background-color: #4caf50; color: white; transition: 0.2s; }
  button:hover { background-color: #45a049; }
  .X { color: #e74c3c; font-weight: bold; } /* красный X */
  .O { color: #3498db; font-weight: bold; } /* синий O */
</style>
</head>
<body>
<h1>Крестики-нолики с ботом и цветами</h1>
<div class="board" id="board"></div>
<div id="message"></div>
<button onclick="resetGame()">Начать заново</button>

<script>
const boardElement = document.getElementById('board');
const message = document.getElementById('message');
let board = Array(9).fill('');
let currentPlayer = 'X';
let gameOver = false;
let botPlayer = 'O';

function createBoard() {
  boardElement.innerHTML = '';
  board.forEach((cell, index) => {
    const cellDiv = document.createElement('div');
    cellDiv.classList.add('cell');
    if (cell === 'X') cellDiv.classList.add('X');
    if (cell === 'O') cellDiv.classList.add('O');
    cellDiv.addEventListener('click', () => makeMove(index));
    cellDiv.textContent = cell;
    boardElement.appendChild(cellDiv);
  });
}

function makeMove(index) {
  if (board[index] !== '' || gameOver) return;
  board[index] = currentPlayer;
  checkWinner();
  currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
  createBoard();

  if (!gameOver && currentPlayer === botPlayer) {
    setTimeout(botMove, 400);
  }
}

function botMove() {
  let emptyCells = board.map((cell, i) => cell === '' ? i : null).filter(i => i !== null);
  if (emptyCells.length === 0) return;
  let move = emptyCells[Math.floor(Math.random() * emptyCells.length)];
  board[move] = botPlayer;
  checkWinner();
  currentPlayer = 'X';
  createBoard();
}

function checkWinner() {
  const winCombos = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  for (const combo of winCombos) {
    const [a,b,c] = combo;
    if (board[a] && board[a] === board[b] && board[a] === board[c]) {
      message.textContent = `Победитель: ${board[a]}!`;
      gameOver = true;
      return;
    }
  }
  if (!board.includes('')) {
    message.textContent = 'Ничья!';
    gameOver = true;
  }
}

function resetGame() {
  board = Array(9).fill('');
  currentPlayer = 'X';
  gameOver = false;
  message.textContent = '';
  createBoard();
}

createBoard();
</script>
</body>
</html>
